<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" />

<section id="stats-section">
  <h2>Our 2022 DST/QOZ* Activity</h2>

  <!-- Top row: 4 equal boxes -->
  <div class="stats-grid top-row">
    <div class="stat-box">
      <i class="bi bi-bar-chart stat-icon"></i>
      <div data-end="146">0</div>
      <p>investment transactions</p>
    </div>
    <div class="stat-box">
      <i class="bi bi-people stat-icon"></i>
      <div data-end="72">0</div>
      <p>investing families/entities</p>
    </div>
    <div class="stat-box">
      <i class="bi bi-building stat-icon"></i>
      <div data-end="64">0</div>
      <p>DST real-estate programs</p>
    </div>
    <div class="stat-box">
      <i class="bi bi-house-door stat-icon"></i>
      <div data-end="299">0</div>
      <p>total portfolio properties</p>
    </div>
  </div>

  <!-- Bottom row: 3 equal boxes -->
  <div class="stats-grid bottom-row">
    <div class="stat-box">
      <i class="bi bi-currency-dollar stat-icon"></i>
      <div data-end="92.22" data-decimals="2">0</div>
      <p>$92.22 M equity / $56.97 M debt</p>
    </div>
    <div class="stat-box">
      <i class="bi bi-pie-chart stat-icon"></i>
      <div data-end="149.19" data-decimals="2">0</div>
      <p>million total real-estate value</p>
    </div>
    <div class="stat-box">
      <i class="bi bi-person-check stat-icon"></i>
      <div data-end="19">0</div>
      <p>different DST sponsors</p>
    </div>
  </div>

  <small class="disclaimer">
    *This does not include investments in REITs, LLCs, Limited Partnerships, or other non-DST/QOZ programs.<br>
    Based on commissions paid 1/1/2022 â€“ 12/31/2022; assumes three properties per QOZ fund.
  </small>
</section>

<style>
  /* Desktop & default styles */
  #stats-section {
    background: transparent;
    padding: 0 20px 40px;
    font-family: 'Helvetica Neue', sans-serif;
    text-align: center;
    margin-top: 0;
  }

  #stats-section h2 {
    color: #000;
    font-weight: 700;
    font-size: clamp(1.8rem, 4vw, 2.4rem);
    margin: 0 0 35px 0;
  }

  .stats-grid {
    display: grid;
    gap: 30px;
    margin: 0 auto 30px auto;
    max-width: 900px;
  }

  .top-row {
    grid-template-columns: repeat(4, 1fr);
  }

  .bottom-row {
    grid-template-columns: repeat(3, 1fr);
  }

  .stat-box {
    height: 220px;
    padding: 20px 12px;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    border: 1px solid #000;
    border-radius: 8px;
    background: transparent;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    box-sizing: border-box;
  }

  .stat-box:hover {
    transform: scale(1.06) translateY(-4px);
    box-shadow: 0 10px 18px rgba(0, 0, 0, 0.1);
  }

  .stat-icon {
    font-size: 1.6rem;
    color: #000;
    margin-bottom: 8px;
  }

  .stat-box div {
    color: #000;
    font-size: 1.8em;
    font-weight: 800;
    margin-bottom: 6px;
  }

  .stat-box p {
    color: #000;
    font-size: 0.9em;
    font-weight: 600;
    margin: 0;
    text-align: center;
    line-height: 1.3;
    word-break: break-word;
    max-width: 95%;
  }

  .disclaimer {
    display: block;
    margin-top: 25px;
    font-size: 0.7em;
    color: #000;
    max-width: 680px;
    margin-left: auto;
    margin-right: auto;
  }

  /* ---------- Mobile adjustments (max-width: 900px) ---------- */
  @media (max-width: 900px) {
    #stats-section {
      padding: 10px 15px 20px;
    }

    #stats-section h2 {
      margin: 0 0 20px 0;
      font-size: clamp(1.6rem, 5vw, 2rem);
    }

    .stats-grid {
      gap: 20px;
      margin: 0 auto 20px auto;
      max-width: 100%;
    }

    /* Show two boxes per row on mobile */
    .top-row,
    .bottom-row {
      grid-template-columns: repeat(2, 1fr);
    }

    /* Make the THIRD box in the bottom row span both columns so it appears centered */
    .bottom-row .stat-box:nth-child(3) {
      grid-column: 1 / -1;
    }

    .stat-box {
      height: auto;
      padding: 16px 12px;
    }

    .stat-icon {
      font-size: 1.4rem;
      margin-bottom: 6px;
    }

    .stat-box div {
      font-size: 1.6em;
      margin-bottom: 4px;
    }

    .stat-box p {
      font-size: 0.9em;
      line-height: 1.3;
    }

    .disclaimer {
      margin-top: 15px;
      font-size: 0.65em;
      padding: 0 10px;
    }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const observer = new IntersectionObserver(entries => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          document.querySelectorAll('.stat-box div').forEach(el => {
            if (el.dataset.animated) return;
            const end = parseFloat(el.dataset.end);
            const dec = parseInt(el.dataset.decimals) || 0;
            const duration = 2000;
            const start = performance.now();

            function update(time) {
              let progress = Math.min((time - start) / duration, 1);
              el.textContent = (end * progress).toFixed(dec);
              if (progress < 1) requestAnimationFrame(update);
              else el.dataset.animated = true;
            }

            requestAnimationFrame(update);
          });
          observer.disconnect();
        }
      });
    }, { threshold: 0.2 });
    observer.observe(document.getElementById('stats-section'));
  });
</script>


